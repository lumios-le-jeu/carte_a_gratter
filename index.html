<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Carte √† Gratter magique ‚ú®</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&family=Playfair+Display:ital,wght@0,600;1,600&display=swap"
    rel="stylesheet">
</head>

<body>
  <div id="root">

    <!-- CREATOR INTERFACE -->
    <div id="creator-app" class="fade-in">
      <div class="glass-panel">

        <h1>‚ú® Cr√©ez votre Carte Magique</h1>
        <p class="subtitle">Offrez une surprise inoubliable avec une carte √† gratter personnalis√©e.</p>

        <form id="creator-form">
          <div class="input-group">
            <label>1. Votre Message Cach√©</label>
            <input type="text" id="input-message" placeholder="Joyeux Anniversaire ! ‚ù§Ô∏è" maxlength="50" required>
          </div>

          <div class="input-group">
            <label>2. Image √† Gratter (Couverture)</label>
            <div class="options">
              <button type="button" class="option-btn active" data-cover="default">Or & C≈ìurs</button>
              <button type="button" class="option-btn" data-cover="custom">Lien URL</button>
            </div>
            <input type="url" id="input-cover-url" placeholder="https://drive.google.com/file/d/... ou autre"
              class="hidden">
            <p class="hint hidden" id="cover-url-hint">üí° Assurez-vous que votre fichier est partag√© en <strong>acc√®s
                public (Lecteur)</strong> sur Google Drive ou Google Photos.</p>
          </div>

          <div class="input-group">
            <label>3. L'Arri√®re-Plan (Surprise)</label>
            <div class="options">
              <button type="button" class="option-btn active" data-bg="default">Romantique</button>
              <button type="button" class="option-btn" data-bg="custom-img">Photo (URL)</button>
            </div>
            <input type="url" id="input-bg-url" placeholder="https://drive.google.com/file/d/... ou autre"
              class="hidden">
            <p class="hint hidden" id="bg-url-hint">üí° Assurez-vous que votre fichier est partag√© en <strong>acc√®s
                public (Lecteur)</strong> sur Google Drive ou Google Photos.</p>
          </div>

          <div class="actions">
            <button type="submit" id="generate-btn">G√©n√©rer le Lien ‚ú®</button>
            <button type="button" id="preview-btn" class="secondary">Pr√©visualiser</button>
          </div>
        </form>

        <div id="result-area" class="hidden">
          <div class="divider"></div>
          <div id="share-warning" class="warning-box hidden">
            ‚ö†Ô∏è Attention : Les fichiers import√©s localement ne peuvent pas √™tre partag√©s par lien. Utilisez des liens
            URL pour un partage complet.
          </div>
          <h3>Votre lien est pr√™t !</h3>
          <div class="link-box">
            <input type="text" id="share-link" readonly>
            <button id="copy-btn">Copier</button>
          </div>
          <a href="#" id="open-link-btn" target="_blank" class="preview-link">Ouvrir la carte</a>
        </div>
      </div>
    </div>

    <!-- VIEWER INTERFACE (CARD) -->
    <div id="viewer-app" class="hidden">
      <div id="background-container">
        <!-- Media will be injected here -->
      </div>
      <div id="overlay-text">Votre Message</div>
      <canvas id="scratch-canvas"></canvas>
      <div class="scratch-hint">
        üî• Grattez pour d√©couvrir !
      </div>
      <div id="loading-indicator" class="hidden">
        <div class="spinner"></div>
        <p>Chargement de votre carte magique...</p>
      </div>
    </div>

  </div>
  <script type="module" src="/main.js"></script>
</body>

</html>